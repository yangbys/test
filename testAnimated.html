
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<link href="os-animate.css" rel="stylesheet"/>
<script src="jquery.min.js"></script>
<title>animated</title>

<style type="text/css" media="all">
body,ul,li { padding:0; margin:0; border:0;}
body { font-size:12px; -webkit-user-select:none; -webkit-text-size-adjust:none; font-family:helvetica; overflow:hidden;}
.main {display:none; position:absolute; width: 100%; height:100%; left:0; top:0;}
.btnArea {padding:20px; background:#f2f2f2; text-align: center;}
.btnArea .btn {display:inline-block; padding:10px 25px; border-radius: 2px; margin-right:10px; background:#ff6600; color:#fff; cursor:pointer; -webkit-transition:background-color .5s;transition:background-color .5s;}
.btnArea .btn:hover,.btnArea .btn.cur  {background-color: green;}
.pageContent {overflow: hidden; position:relative; border:2px solid #d8d8d8; width:1000px; height:300px; margin:10px auto;}
.page {position:absolute; width:100%; height:100%; left:0; top:0;  visibility: hidden; z-index: 2; color:#fff; text-align: center; line-height: 100px; font-size:30px;}
.page1 {z-index: 4; background-color: green;}
.page2 { background-color: red;}
.page3 { background-color: blue;}
.page4 { background-color: #ff6600;}
.page.cur {visibility:visible;}

.order {position:absolute; width: 100%; height:100%; left:0; top:0;}
.tab {padding:20px 0; text-align: center;}
.tab span {display:inline-block; padding:10px 25px; border-radius: 2px; margin-right:10px; background:#ff6600; color:#fff; cursor:pointer; -webkit-transition:background-color .5s;transition:background-color .5s;}
.tab span:hover,.tab span.cur  {background-color: green;}
.list {line-height: 0; padding:20px; border:2px solid red; width:100%; display: block; box-sizing: border-box;}
.list li.transition { -webkit-transition:-webkit-transform ease-out .5s; transition:transform ease-out .5s; }
.list li {display:inline-block; width:100px; height:100px; margin:0 10px 10px 0;}
.list li span {display:block; background:#f2f2f2; width:100px; height:100px; line-height: 100px; font-size:20px; text-align: center;}
.list li[data-num="2"] span {background:#ff6600; color:#fff;}
.list li[data-num="4"] span {background:green; color:#fff;}
.list li[data-num="6"] span {background:#007BFF; color:#fff;}
.list li[data-num="10"] span {background:#7D3200; color:#fff;}
.content {position:relative;}
.content .tab-c {position:absolute; left:0; top:0; width:100%;}
li.pop.in {
    -webkit-transform : scale(.2);
    -webkit-animation-name : inZoom;
    -webkit-animation-duration : 300ms;
}
li.pop.out {
    -webkit-transform : scale(1);
    -webkit-animation-name : outZoom;
    -webkit-animation-duration : 300ms;
}

@-webkit-keyframes inZoom {
    0% {
        -webkit-transform : scale(0);
        opacity : 0 ;
    }
    100% {
        -webkit-tranform : scale(1);
        opacity: 1;
    }
}

@-webkit-keyframes outZoom {
    0% {
        -webkit-transform : scale(1);
        opacity : 1 ;
    }
    100% {
        -webkit-tranform : scale(.2);
        opacity: 0;
    }
}
</style>
</head>
<body>
    <div class="main">
        <div class="btnArea">
            <span class="btn btn1 cur">按钮一</span>
            <span class="btn btn2">按钮二</span>
            <span class="btn btn3">按钮三</span>
            <span class="btn btn4">按钮四</span>
        </div>

        <div class="pageContent">
            <div class="page page1 cur">页面1</div>
            <div class="page page2">页面2</div>
            <div class="page page3">页面3</div>
            <div class="page page4">页面4</div>
        </div>
    </div>


	<div class="order">
		<div class="tab">
			<span data-type="all" class="cur">不限</span>
			<span data-type="10">10人</span>
			<span data-type="6">6人</span>
			<span data-type="4">4人</span>
			<span data-type="2">2人</span>
		</div>
		<div class="content">
			<div class="tab-c">
				<ul class="list">
					<li data-num="10"><span>10人</li>
					<li data-num="4"><span>4人</li>
					<li data-num="2"><span>2人</span></li>
					<li data-num="10"><span>10人</span></li>
					<li data-num="4"><span>4人</span></li>
					<li data-num="4"><span>4人</span></li>
					<li data-num="6"><span>6人</span></li>
					<li data-num="2"><span>2人</span></li>
					<li data-num="10"><span>10人</span></li>
					<li data-num="2"><span>2人</span></li>
					<li data-num="4"><span>4人</span></li>
					<li data-num="2"><span>2人</span></li>
					<li data-num="10"><span>10人</span></li>
					<li data-num="4"><span>4人</span></li>
					<li data-num="4"><span>4人</span></li>
					<li data-num="10"><span>10人</span></li>
					<li data-num="6"><span>6人</span></li>
					<li data-num="10"><span>10人</span></li>
					<li data-num="2"><span>2人</span></li>
					<li data-num="2"><span>2人</span></li>
					<li data-num="4"><span>4人</span></li>
					<li data-num="2"><span>2人</span></li>
					<li data-num="10"><span>10人</span></li>
					<li data-num="4"><span>4人</span></li>
					<li data-num="4"><span>4人</span></li>
					<li data-num="10"><span>10人</span></li>
					<li data-num="4"><span>4人</span></li>
					<li data-num="4"><span>4人</span></li>
				</ul>
			</div>
		</div>
	</div>

    <script type="text/javascript">
        var order = {
            sort : function(type){
                if(this.hasClear !== undefined && !this.hasClear){
                    console.log('go clearEnd...');
                    this.clearEnd();
                }
                this.hasClear = false;

                this.targetObj =  $('.tab-c').eq(0);
                this.$cloneObj = this.targetObj.clone().appendTo($('.content')).css('visibility','hidden');
                this.$cloneObj.find('li').show();

                if(type === 'all'){
                    this.cloneFilterData = this.$cloneObj.find('li');
                    this.notTargetData = {};
                    this.target = this.targetObj.find('li');
                }else{
                    var _data = '[data-num="'+ type +'"]';
                    this.cloneFilterData = this.$cloneObj.find('li'+_data);
                    this.notTargetData = this.targetObj.find('li').not(_data).removeClass('in').addClass('hide-out');
                    this.target = this.targetObj.find('li'+_data);
                    this.$cloneObj.find('li').not(_data).hide();
                }

                this.cloneFilterData.show().removeClass('pop out');

                this.visibleTarget = this.target.not('.hide-out').addClass('transition');
                this.hiddenTarget = this.target.not(this.visibleTarget).show();
                var _self = this;
                $.each(this.target,function(i,item){
                    if($(this).hasClass('hide-out')){
                        $(this).removeClass('hide-out');
                        var x = _self.cloneFilterData.eq(i).position().left,
                            y = _self.cloneFilterData.eq(i).position().top;
                        $(this).css({
                            position : 'absolute',
                            left : x,
                            top : y
                        })
                    }else{
                        var x = _self.cloneFilterData.eq(i).position().left - $(this).position().left,
                            y = _self.cloneFilterData.eq(i).position().top - $(this).position().top;
                        $(this).css({
                            '-webkit-transform' : 'translate3d('+ x +'px,'+ y +'px,0)'
                        })
                    }
                });

                this.hiddenTarget.addClass('pop in').removeClass('out');
                if(!$.isEmptyObject(this.notTargetData)){
                    this.notTargetData.addClass('pop out');
                }
                var _self = this;
                this.timer = setTimeout(function(){
                    _self.clearEnd();
                },1000);

            },
            clearEnd : function(){
                if(this.hasClear) return false;
                this.hasClear = true;
                this.$cloneObj.remove();
                this.timer && clearTimeout(this.timer);
                if(!$.isEmptyObject(this.notTargetData)){
                    this.notTargetData.hide()
                }
                this.visibleTarget.removeClass('transition');
                this.target.removeClass('pop').removeAttr('style');
            }
        }


        $('.tab').on('click','span',function(){
            var _this = $(this),
                _type = _this.data('type');
            if(_this.hasClass('cur')) return false;
            _this.addClass('cur').siblings('.cur').removeClass('cur');
            order.sort(_type);
        });
        order.sort('all');
    </script>
</body>
</html>
